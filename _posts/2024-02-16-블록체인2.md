---
title: 📝블록체인의 허점 (포크)
date : 2024-02-16 15:00
category : [Study, BlockChain]
tags : [blockchain]
---

# 🖐️개요
데이터를 담은 블록들이 약 10분에 한 개씩 생성되고 이어져 '체인'을 형성하는데 이를 **블록체인**이라 부른다.   
블록체인은 **분산화**라는 특징으로 금융기관의 중개 없이도 거래가 가능하고 이를 전 세계 사람들이 참여해 거래를 기록하고 검증하는 과정을 거친다.   

그렇다면 과반이 검증했다해서 100% 신뢰 가능한 기록일까?   

## 블록체인의 허점
### 🖐️블록체인의 근본적인 문제. (51% Attack)
A가 B에게 1BTC를 송금하면, A의 지갑에서 1BTC가 차감되고 B의 지갑에 1BTC가 추가되어야 한다.   

블록체인에서는 A의 1BTC가 B가 아닌, C에게 1BTC를 전송했다고 잘못 기록되는 상황이 발생한다.
![](/assets/img/YY-MM/2024-02-16-15-47-35.png)   
그렇게 되면 A의 지갑에서 차감된 1BTC가 B의 지갑과 C의 지갑으로 모두 송금되는 현상이 발생하는데 이를 `이중지불(Double spending)`이라 하고 이때 블록체인은 `분기(fork)`된다.   

이중지불 문제가 발생하면 1BTC가 2BTC로 불어나게 되므로 반드시 해결해야 한다. 과반수가 **A와 B의 거래**가 기록된 블록체인을 **참**이라 하면 문제는 해결되지만, **A와 C의 거래**가 **참**이라 하면 `사기 장부`가 된다.   

**즉, 블록체인에 참여하는 51% 이상의 노드가 동시에 거래내역을 조작하는 것이다.** 이를 `51% attack`이라 한다.   

`51% attack`은 블록체인을 반대하는 사람들이 주장하는 가장 **근본적인 문제**이지만, 현실화될 위험은 극히 낮다.   

사기장부의 기록이 거짓임은 결국 알려지는데, 그러면 해당 블록체인의 가치가 추락할 것이고, 51% 노드를 보유하기 위해 채굴에 필요한 엄청난 자산을 투자하고, 해당 블록체인의 가치를 낮출 수도 있는 일을 벌이는 것은 수지타산에 맞지 않는다.   

이러한 경제적 유인때문에 채굴 노드들은 거짓으로 기록을 작성하는 것 보다 진실인 기록을 남기는 것이 경제적으로 이득이다.   

### 🖐️Fork
포크는 더 큰틀에서 정의하면, **서로 추구하는 것이 다를 때** 일어난다.   

블록체인 환경이 업데이트 될 때에도 포크가 일어나는 데, 새로운 환경을 만들기 위해 업데이트를 하는 경우 기존의 규칙을 유지하려는 블록과 새로운 규칙을 따르는 블록으로 포킹된다.   

포크에는 두 가지가 있다.   
1. 소프트 포크(Soft Fork)
소프트 포크는 기존의 규칙에서 큰 틀은 바꾸지 않고 부분적인 업데이트만 일어나기 때문에 **포킹된 블록끼리 호환**이 가능하다.   

2. 하드 포크(Hard Fork)
하드포크는 블록의 규칙을 근본적으로 바꾸는 업데이트다. 그렇기 때문에 이전 노드들과 호환이 되지 않는다.  

이 내용은 [이전 포스트]({% post_url 2024-02-04-스마트 컨트랙트 한계 %}) 에서 다룬 적이 있다. 


현재도 포크는 일어나고 있고, 개발자와 채굴자간 서로에게 유리한 방향으로 블록체인을 업데이트하기 위해 여러 투쟁이 있다.   



#### 참고
1. <https://www.banksalad.com/contents/%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85%ED%95%98%EB%8A%94-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8%EC%9D%98-%ED%97%88%EC%A0%90%EA%B3%BC-%ED%95%98%EB%93%9C%ED%8F%AC%ED%81%AC-%EC%86%8C%ED%94%84%ED%8A%B8%ED%8F%AC%ED%81%AC-QfiST>